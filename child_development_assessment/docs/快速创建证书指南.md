# 快速创建iOS证书指南

## 当前状态
您已经生成了CSR文件，但现有证书显示为无效状态。需要重新创建证书。

## 快速解决步骤

### 步骤1: 清理无效证书
```bash
# 删除所有iOS证书
security delete-certificate -Z "Apple Development"
security delete-certificate -Z "iPhone Developer"
security delete-certificate -Z "iPhone Distribution"
security delete-certificate -Z "iOS Distribution"
```

### 步骤2: 使用已生成的CSR文件
您已经生成了CSR文件：
- 位置：`/Users/vonxq/Desktop/iOS_Certificates/CertificateSigningRequest.certSigningRequest`

### 步骤3: 在Apple Developer Console创建证书

1. **访问证书管理页面**
   - 链接：https://developer.apple.com/account/resources/certificates/list

2. **创建新证书**
   - 点击 "+" 按钮
   - 选择 "iOS App Development"（用于测试）
   - 上传CSR文件：`/Users/vonxq/Desktop/iOS_Certificates/CertificateSigningRequest.certSigningRequest`

3. **下载并安装证书**
   - 下载生成的.cer文件
   - 双击.cer文件安装到钥匙串

### 步骤4: 创建App ID（如果还没有）

1. **访问App ID管理**
   - 链接：https://developer.apple.com/account/resources/identifiers/list

2. **创建App ID**
   - 点击 "+" 按钮
   - 选择 "App IDs"
   - 选择 "App"
   - Bundle ID：`com.vonxq.childDevelopmentAssessment`
   - 描述：儿童发育评估

### 步骤5: 创建配置文件

1. **访问配置文件管理**
   - 链接：https://developer.apple.com/account/resources/profiles/list

2. **创建配置文件**
   - 点击 "+" 按钮
   - 选择 "iOS App Development"
   - App ID：选择刚创建的App ID
   - 证书：选择刚创建的证书
   - 设备：选择测试设备（如果需要）

3. **下载配置文件**
   - 下载.mobileprovision文件
   - 双击安装到Xcode

### 步骤6: 在Xcode中配置

1. **打开项目**
   ```bash
   open ios/Runner.xcworkspace
   ```

2. **配置签名**
   - 选择 Runner target
   - 在 "Signing & Capabilities" 中：
     - 勾选 "Automatically manage signing"
     - 选择Team：xueqin feng
     - Bundle Identifier：com.vonxq.childDevelopmentAssessment

### 步骤7: 测试构建

```bash
flutter clean
flutter pub get
flutter build ios --debug
```

## 常见问题

### Q: 证书仍然显示无效怎么办？
**A**: 
1. 确保在Apple Developer Console中删除了旧的证书
2. 重新创建证书
3. 重新安装到钥匙串

### Q: 找不到App ID怎么办？
**A**: 
1. 确保Bundle ID正确：`com.vonxq.childDevelopmentAssessment`
2. 在Apple Developer Console中创建对应的App ID

### Q: 配置文件不匹配怎么办？
**A**: 
1. 确保App ID、证书、设备都正确选择
2. 重新创建配置文件

## 验证步骤

运行以下命令验证：
```bash
# 检查证书
bash scripts/check_certificates.sh

# 检查构建
flutter build ios --debug --no-codesign
```

## 重要提醒

- 保管好私钥文件：`/Users/vonxq/Desktop/iOS_Certificates/private_key.pem`
- 不要删除私钥，否则证书无法使用
- 定期备份证书和私钥 