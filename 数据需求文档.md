# 儿童发育行为评估应用 - 数据需求文档

## 1. 数据来源分析

### 1.1 Excel文件结构分析

根据对docs文件夹中Excel文件的分析，发现以下问题：

#### 1.1.1 量表文件 (`0 岁～6 岁儿童发育行为评估量表（儿心量表- Ⅱ).xlsx`)
- **文件结构**: 72行 × 7列
- **列名问题**: 列名显示为"Unnamed: 0", "Unnamed: 1"等，缺少月龄信息
- **实际内容**: 包含测试项目，但列名不包含月龄标识
- **数据格式**: 项目格式为"□1抬肩坐起头竖直片刻"

#### 1.1.2 操作方法文件 (`0 岁～6 岁儿童发育行为评估量表（儿心量表- Ⅱ ) 操作方法和测查通过要求.xlsx`)
- **文件结构**: 266行 × 3列
- **数据格式**: 包含项目编号、操作方法、通过要求
- **提取成功**: 已成功提取261个操作方法

### 1.2 数据提取问题

1. **列名缺失**: Excel文件的列名不包含月龄信息
2. **月龄映射**: 需要手动建立列索引与月龄的对应关系
3. **数据完整性**: 需要验证量表数据与操作方法数据的匹配

## 2. 数据格式要求

### 2.1 测试项目数据格式

```json
{
  "id": "string",           // 唯一标识，格式: "{月龄}_{能区}_{项目编号}"
  "ageGroup": "number",     // 月龄组 (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 15, 18, 21, 24, 27, 30, 33, 36, 42, 48, 54, 60, 66, 72, 78, 84)
  "area": "string",         // 能区 ("motor" | "fineMotor" | "language" | "adaptive" | "social")
  "order": "number",        // 项目顺序编号
  "title": "string",        // 项目标题
  "requirement": "string",  // 测试要求
  "method": "string",       // 操作方法
  "passStandard": "string", // 通过标准
  "score": "number",        // 单项得分
  "imagePath": "string"     // 配图路径 (可选)
}
```

### 2.2 月龄组配置格式

```json
{
  "age": "number",          // 月龄
  "scorePerArea": "number", // 该月龄组每个能区的总分
  "description": "string"   // 描述
}
```

### 2.3 计算规则配置格式

```json
{
  "developmentQuotientRanges": {
    "excellent": {"min": 130, "max": 200, "description": "优秀"},
    "good": {"min": 110, "max": 129, "description": "良好"},
    "average": {"min": 80, "max": 109, "description": "中等"},
    "low": {"min": 70, "max": 79, "description": "临界偏低"},
    "disability": {"min": 0, "max": 69, "description": "智力发育障碍"}
  },
  "scoreRules": {
    "1-12_months": {"scorePerArea": 1.0, "scorePerItem": 1.0},
    "15-36_months": {"scorePerArea": 3.0, "scorePerItem": 3.0},
    "42-84_months": {"scorePerArea": 6.0, "scorePerItem": 6.0}
  },
  "testFlow": {
    "forwardTestMonths": 2,
    "backwardTestMonths": 2,
    "maxTestMonths": 5
  }
}
```

## 3. 数据整理要求

### 3.1 Excel文件整理

#### 3.1.1 量表文件整理
1. **添加月龄列名**: 为每列添加正确的月龄标识
2. **标准化格式**: 统一项目编号和标题格式
3. **能区标识**: 明确标识每个能区的开始和结束
4. **数据验证**: 确保所有项目都有对应的操作方法

#### 3.1.2 操作方法文件整理
1. **项目编号标准化**: 统一项目编号格式
2. **内容完整性**: 确保每个项目都有操作方法和通过要求
3. **文本清理**: 去除多余的空格和换行符

### 3.2 数据映射关系

#### 3.2.1 月龄组定义
根据国家标准，月龄组包括：
- 1-12月龄: 每月一个组
- 15-36月龄: 每3个月一个组
- 42-84月龄: 每6个月一个组

#### 3.2.2 能区定义
- **大运动能区 (motor)**: 身体的姿势、头的平衡，以及坐、爬、立、走、跑、跳的能力
- **精细动作能区 (fineMotor)**: 使用手指的能力
- **语言能区 (language)**: 理解语言和语言的表达能力
- **适应能力能区 (adaptive)**: 对周围自然环境和社会需要作出反应和适应的能力
- **社会行为能区 (social)**: 对周围人们的交往能力和生活自理能力

## 4. Mock数据需求

### 4.1 Mock数据文件夹结构

```
mock/
├── test_items.json          # 测试项目数据
├── age_groups.json          # 月龄组配置
├── calculation_rules.json   # 计算规则配置
├── sample_babies.json       # 示例宝宝数据
├── sample_test_records.json # 示例测试记录
└── sample_results.json      # 示例测试结果
```

### 4.2 Mock数据内容要求

#### 4.2.1 测试项目数据
- **覆盖范围**: 至少包含3个不同月龄组的完整数据
- **项目数量**: 每个能区至少2个项目
- **数据完整性**: 包含所有必需字段
- **操作方法**: 提供详细的操作指导
- **通过标准**: 明确的通过要求

#### 4.2.2 示例宝宝数据
- **基本信息**: 姓名、出生日期、性别
- **测试历史**: 包含多次测试记录
- **数据真实性**: 符合实际使用场景

#### 4.2.3 示例测试记录
- **完整流程**: 从开始到结束的完整测试过程
- **结果计算**: 包含智龄和发育商的计算
- **数据验证**: 确保计算结果的准确性

## 5. 数据质量要求

### 5.1 数据完整性
- 所有必需字段都不能为空
- 项目编号必须唯一
- 月龄必须在有效范围内(1-84个月)

### 5.2 数据一致性
- 项目编号与操作方法必须匹配
- 能区标识必须统一
- 得分规则必须一致

### 5.3 数据准确性
- 操作方法必须准确描述测试过程
- 通过标准必须明确具体
- 计算规则必须符合国家标准

## 6. 数据验证规则

### 6.1 输入验证
- 月龄范围: 1-84个月
- 项目编号: 正整数
- 得分: 非负数，符合月龄组规则

### 6.2 业务验证
- 每个能区的项目数量合理
- 项目难度随月龄递增
- 操作方法可操作性强

### 6.3 计算验证
- 智龄计算准确
- 发育商在合理范围内
- 评级结果正确

## 7. 数据更新机制

### 7.1 版本控制
- 数据文件需要版本号
- 更新日志记录变更内容
- 向后兼容性保证

### 7.2 数据备份
- 定期备份原始数据
- 备份计算结果
- 数据恢复机制

### 7.3 数据同步
- 本地数据与云端同步
- 数据冲突解决机制
- 增量更新支持

## 8. 后续工作

### 8.1 数据整理任务
1. 整理Excel文件，添加正确的列名
2. 标准化项目编号和标题格式
3. 完善操作方法和通过要求
4. 验证数据完整性和一致性

### 8.2 Mock数据创建
1. 创建mock文件夹结构
2. 生成示例测试项目数据
3. 创建示例宝宝和测试记录
4. 验证数据格式和计算逻辑

### 8.3 数据提取脚本优化
1. 根据整理后的Excel文件优化提取逻辑
2. 添加数据验证和错误处理
3. 支持增量数据更新
4. 添加数据质量检查功能 