## 表A.1  0 岁～6 岁儿童发育行为评估量表（儿心量表- Ⅱ).xlsx

```json
{
    "ageMonth": "number",
    "area": "string", // 大运动或其他
    "score": "number",
    "testItems": [
        {
            "id": "number",
            "name": "string",
            "desc": "string"
        }
    ]
}
```

## 表 B.1  0 岁～6 岁儿童发育行为评估量表（儿心量表-Ⅱ)操作方法和测查通过要求

```json
[
    {
        "id": "number",
        "name": "string",
        "operation": "string", // 具体操作方法
        "passCondition": "string" // 通过要求
    }
]
```

## 表A.2  0 岁～6 岁儿童发育行为评估量表（儿心量表- Ⅱ) 基本信息和结果记录

```json
{
    "userName": "string",
    "date": "string", // ISO 8601格式
    "birthDate": "string", // ISO 8601格式
    "month": "number",
    "testResults": [
        {
            "area": "string",
            "mentalAge": "number", // 智龄（月）
            "developmentQuotient": "number" // 发育商（DQ）
        }
    ],
    "allResult": {
        "area": "string",
        "mentalAge": "number", // 智龄（月）
        "developmentQuotient": "number" // 发育商（DQ）
    }
}
```

## 测试方法

### 1. 数据获取流程

#### 1.1 确定主测月龄
- 根据用户输入的实际月龄，找到最接近的月龄段作为主测月龄
- 如果实际月龄介于两个月龄段之间，选择较小的月龄段
- 例如：实际月龄3.2个月 → 主测月龄3个月

#### 1.2 获取测试项目
```javascript
// 伪代码示例
function getTestItems(actualAge) {
    const mainTestAge = findClosestAge(actualAge); // 确定主测月龄
    const testRange = [mainTestAge - 2, mainTestAge - 1, mainTestAge, mainTestAge + 1, mainTestAge + 2]; // 5个月龄范围
    
    let allTestItems = [];
    
    for (let age of testRange) {
        if (age > 0) { // 月龄必须大于0
            const items = getItemsByAge(age); // 从表A.1获取该月龄的所有项目
            allTestItems = allTestItems.concat(items);
        }
    }
    
    return allTestItems;
}
```

#### 1.3 测试项目排序
- 按能区分组：大运动、精细动作、语言、适应能力、社会行为
- 每个能区内按月龄从低到高排序
- 确保测试顺序符合量表要求

### 2. 测试执行流程

#### 2.1 测试启动
- 从主测月龄开始测试
- 每个能区分别进行测试
- 记录每个项目的通过情况（○通过，×不通过）

#### 2.2 向前测查规则
- 从主测月龄向前测查2个月龄
- 如果连续2个月龄的项目均通过，则停止向前测查
- 如果连续2个月龄中有任何一项未通过，继续向前测查直到连续2个月龄均通过

#### 2.3 向后测查规则
- 从主测月龄向后测查2个月龄
- 如果连续2个月龄的项目均不通过，则停止向后测查
- 如果连续2个月龄中有任何一项通过，继续向后测查直到连续2个月龄均不通过

### 3. 结果计算流程

#### 3.1 各能区计分规则
```javascript
// 计分规则
function calculateScore(ageMonth) {
    if (ageMonth >= 1 && ageMonth <= 12) {
        return 1.0; // 每个能区1.0分
    } else if (ageMonth >= 15 && ageMonth <= 36) {
        return 3.0; // 每个能区3.0分
    } else if (ageMonth >= 42 && ageMonth <= 84) {
        return 6.0; // 每个能区6.0分
    }
}
```

#### 3.2 智龄计算
```javascript
// 智龄计算伪代码
function calculateMentalAge(area, testResults) {
    let totalScore = 0;
    let consecutivePasses = 0;
    
    // 按月龄从高到低排序测试结果
    const sortedResults = testResults.sort((a, b) => b.ageMonth - a.ageMonth);
    
    for (let result of sortedResults) {
        if (result.passed) {
            totalScore += result.score;
            consecutivePasses++;
        } else {
            break; // 遇到不通过项目停止计算
        }
    }
    
    // 如果连续通过2个月龄，默认前面全部通过
    if (consecutivePasses >= 2) {
        // 添加默认通过项目的分数
        totalScore += getDefaultPassScore(area);
    }
    
    return totalScore;
}
```

#### 3.3 发育商计算
```javascript
// 发育商计算
function calculateDevelopmentQuotient(mentalAge, actualAge) {
    if (actualAge === 0) return 0;
    return (mentalAge / actualAge) * 100;
}
```

#### 3.4 总体智龄计算
```javascript
// 总体智龄计算
function calculateTotalMentalAge(areaResults) {
    const areas = ['motor', 'fineMotor', 'language', 'adaptive', 'social'];
    let totalMentalAge = 0;
    
    for (let area of areas) {
        if (areaResults[area]) {
            totalMentalAge += areaResults[area].mentalAge;
        }
    }
    
    return totalMentalAge / areas.length; // 五个能区平均值
}
```

### 4. 结果输出格式

```json
{
    "userName": "string",
    "date": "2024-01-01T00:00:00Z",
    "birthDate": "2023-01-01T00:00:00Z",
    "month": 12.0,
    "testResults": [
        {
            "area": "motor",
            "mentalAge": 12.5,
            "developmentQuotient": 104.2
        },
        {
            "area": "fineMotor", 
            "mentalAge": 11.8,
            "developmentQuotient": 98.3
        }
        // ... 其他能区
    ],
    "allResult": {
        "area": "total",
        "mentalAge": 12.1,
        "developmentQuotient": 100.8
    }
}
```

### 5. 测试流程示例

1. **用户输入**：实际月龄12.5个月
2. **确定主测月龄**：12个月
3. **获取测试范围**：10, 11, 12, 13, 14个月龄的项目
4. **开始测试**：从12个月龄开始，按能区分别测试
5. **记录结果**：每个项目的通过情况
6. **计算智龄**：按规则计算各能区智龄
7. **计算发育商**：智龄/实际月龄 × 100
8. **输出结果**：生成完整的测试报告


 